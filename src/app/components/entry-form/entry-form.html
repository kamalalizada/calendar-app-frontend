<div class="entry-form">

  <h3>{{ selectedDay }} üçün əlavə et</h3>
  <!-- Type seçimi -->
  <div class="type-select">
    <button (click)="selectType('expense')" [class.active]="type === 'expense'">Expense</button>
    <button (click)="selectType('income')" [class.active]="type === 'income'">Income</button>
  </div>

  <!-- Məbləğ və qeyd -->
  <div class="form-group">
    <input type="number" [(ngModel)]="amount" placeholder="Məbləğ" />
  </div>
  <div class="form-group">
    <input type="text" [(ngModel)]="note" placeholder="Qeyd (opsional)" />
  </div>

  <!-- Kategoriyalar -->
  <div *ngIf="type" class="category-section">
    <h4>Kategoriyalar</h4>
    <div class="categories">
      <label *ngFor="let cat of sortedCategories">
        <input type="checkbox" [checked]="selectedCategoryIds.includes(cat.id!)" 
               (change)="onCategoryToggle(cat.id!, $event)" />
        {{ cat.name }}
      </label>
    </div>

    <!-- Yeni kateqoriya əlavə et -->
    <button class="toggle-cat-btn" (click)="toggleCategoryManager()">
      {{ showCategoryManager ? 'Bağla' : 'Yeni kateqoriya əlavə et' }}
    </button>

    <div *ngIf="showCategoryManager" class="new-category-panel">
      <input type="text" [(ngModel)]="newCategory[type]" placeholder="Yeni {{ type }}" />
      <button (click)="addCategory(type)">Əlavə et</button>
    </div>
  </div>

  <div class="actions">
    <button (click)="addEntry()">Yadda saxla</button>
    <button (click)="closeForm()">İmtina</button>
  </div>

</div>
